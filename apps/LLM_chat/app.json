{
"Pos": {
"X": 0,
"Y": 0
},
"Name": "root",
"Exe": "layout",
"Attrs": [
{
"Name": "grid",
"Value": "[0, 0, 0, 0]",
"ShowExp": false,
"Ui": {
"HideAddDel": true,
"Visible": false
}
}
],
"Cols": [
{
"Pos": 0,
"Min": 0.1,
"Max": 100,
"Resize": 1
},
{
"Pos": 1,
"Min": 1,
"Max": 1,
"Resize": 1
},
{
"Pos": 2,
"Min": 5,
"Max": 20,
"Resize": 1
},
{
"Pos": 3,
"Min": 2,
"Max": 2,
"Resize": 1
},
{
"Pos": 4,
"Min": 0.1,
"Max": 100,
"Resize": 1
}
],
"Rows": [
{
"Pos": 0,
"Min": 1,
"Max": 15,
"Resize": 1
},
{
"Pos": 1,
"Min": 1,
"Max": 2,
"Resize": 1
}
],
"Subs": [
{
"Pos": {
"X": 11.979129,
"Y": -9.306692
},
"Name": "build_prompt",
"Exe": "vars",
"Attrs": [
{
"Name": "intro",
"Value": "\"This is a conversation between User and Llama, a friendly chatbot. Llama is helpful, kind, honest, good at writing, and never fails to answer any requests immediately and with precision.\"",
"ShowExp": false,
"Ui": {
"HideAddDel": false,
"Visible": false
}
},
{
"Name": "prompt",
"Value": "intro \u0026 \"\\n\"  \u0026 json_into_single_string._chat \u0026 \"\\nUser: \" \u0026 editbox.value \u0026\"\\nLlama:\"",
"ShowExp": false,
"Ui": {
"HideAddDel": false,
"Visible": false
}
},
{
"Name": "grid",
"Value": "[1, 0, 1, 1]",
"ShowExp": false,
"Ui": {
"HideAddDel": false,
"Visible": false
}
}
]
},
{
"Pos": {
"X": 36.773533,
"Y": -16.228455
},
"Name": "reset_editbox",
"Exe": "setter",
"Attrs": [
{
"Name": "trigger",
"Value": "if.trigger",
"ShowExp": false,
"Ui": {
"Fn": "switch",
"HideAddDel": false,
"Visible": false
}
},
{
"Name": "value",
"Value": "\"\"",
"ShowExp": false,
"Ui": {
"HideAddDel": false,
"Visible": false
}
},
{
"Name": "node",
"Value": "\"editbox\"",
"ShowExp": false,
"Ui": {
"HideAddDel": false,
"Visible": false
}
},
{
"Name": "attr",
"Value": "\"value\"",
"ShowExp": false,
"Ui": {
"HideAddDel": false,
"Visible": false
}
}
]
},
{
"Pos": {
"X": 15.821488,
"Y": -10.070763
},
"Name": "if",
"Exe": "if",
"Attrs": [
{
"Name": "trigger",
"Value": "button_send.clicked || editbox.enter_finished",
"ShowExp": false,
"Ui": {
"Fn": "switch",
"HideAddDel": false,
"Visible": false
}
},
{
"Name": "grid",
"Value": "[1, 0, 1, 1]",
"ShowExp": false,
"Ui": {
"HideAddDel": false,
"Visible": false
}
}
],
"Subs": [
{
"Pos": {
"X": 28.558855,
"Y": -8.926152
},
"Name": "db_insert",
"Exe": "sqlite_insert",
"Attrs": [
{
"Name": "file",
"Value": "\"apps/LLM_chat/db.sqlite\"",
"ShowExp": false,
"Ui": {
"Fn": "file",
"HideAddDel": false,
"Visible": false
}
},
{
"Name": "table",
"Value": "\"chat\"",
"ShowExp": false,
"Ui": {
"HideAddDel": false,
"Visible": false
}
},
{
"Name": "values",
"Value": "[{\"value\":editbox.value, \"column\":\"user\", }, {\"value\":time(), \"column\":\"date\", }, {\"value\": if(nn_llama_cpp._out!=\"\", cleanText(get(nn_llama_cpp._out, \"content\")), \"\") , \"column\":\"bot\", }]",
"ShowExp": false,
"Ui": {
"HideAddDel": false,
"Visible": false
}
}
]
},
{
"Pos": {
"X": 20.456673,
"Y": -12.668569
},
"Name": "nn_llama_cpp",
"Exe": "nn_llama_cpp",
"Attrs": [
{
"Name": "model",
"Value": "\"llama-2-7b.Q5_K_M.gguf\"",
"ShowExp": false,
"Ui": {
"Fn": "combo",
"Prms": {
"labels": ";llama-2-7b.Q5_K_M.gguf",
"values": ";llama-2-7b.Q5_K_M.gguf"
},
"HideAddDel": false,
"Visible": false
}
},
{
"Name": "prompt",
"Value": "build_prompt.prompt",
"ShowExp": false,
"Ui": {
"Fn": "Code",
"HideAddDel": false,
"Visible": false
}
},
{
"Name": "stop",
"Value": "[\"\u003c/s\u003e\", \"Llama:\", \"User:\"]",
"ShowExp": false,
"Ui": {
"HideAddDel": false,
"Visible": false
}
},
{
"Name": "seed",
"Value": "-1",
"ShowExp": false,
"Ui": {
"HideAddDel": false,
"Visible": false
}
},
{
"Name": "n_predict",
"Value": "400",
"ShowExp": false,
"Ui": {
"HideAddDel": false,
"Visible": false
}
},
{
"Name": "temperature",
"Value": "0.8",
"ShowExp": false,
"Ui": {
"HideAddDel": false,
"Visible": false
}
},
{
"Name": "dynatemp_range",
"Value": "0",
"ShowExp": false,
"Ui": {
"HideAddDel": false,
"Visible": false
}
},
{
"Name": "dynatemp_exponent",
"Value": "1",
"ShowExp": false,
"Ui": {
"HideAddDel": false,
"Visible": false
}
},
{
"Name": "repeat_last_n",
"Value": "256",
"ShowExp": false,
"Ui": {
"HideAddDel": false,
"Visible": false
}
},
{
"Name": "repeat_penalty",
"Value": "1.18",
"ShowExp": false,
"Ui": {
"HideAddDel": false,
"Visible": false
}
},
{
"Name": "top_k",
"Value": "40",
"ShowExp": false,
"Ui": {
"HideAddDel": false,
"Visible": false
}
},
{
"Name": "top_p",
"Value": "0.5",
"ShowExp": false,
"Ui": {
"HideAddDel": false,
"Visible": false
}
},
{
"Name": "min_p",
"Value": "0.05",
"ShowExp": false,
"Ui": {
"HideAddDel": false,
"Visible": false
}
},
{
"Name": "tfs_z",
"Value": "1",
"ShowExp": false,
"Ui": {
"HideAddDel": false,
"Visible": false
}
},
{
"Name": "typical_p",
"Value": "1",
"ShowExp": false,
"Ui": {
"HideAddDel": false,
"Visible": false
}
},
{
"Name": "presence_penalty",
"Value": "0",
"ShowExp": false,
"Ui": {
"HideAddDel": false,
"Visible": false
}
},
{
"Name": "frequency_penalty",
"Value": "0",
"ShowExp": false,
"Ui": {
"HideAddDel": false,
"Visible": false
}
},
{
"Name": "mirostat",
"Value": "0",
"ShowExp": false,
"Ui": {
"HideAddDel": false,
"Visible": false
}
},
{
"Name": "mirostat_tau",
"Value": "5",
"ShowExp": false,
"Ui": {
"HideAddDel": false,
"Visible": false
}
},
{
"Name": "mirostat_eta",
"Value": "0.1",
"ShowExp": false,
"Ui": {
"HideAddDel": false,
"Visible": false
}
},
{
"Name": "n_probs",
"Value": "0",
"ShowExp": false,
"Ui": {
"HideAddDel": false,
"Visible": false
}
},
{
"Name": "cache_prompt",
"Value": "\"0\"",
"ShowExp": false,
"Ui": {
"Fn": "switch",
"HideAddDel": false,
"Visible": false
}
},
{
"Name": "slot_id",
"Value": "-1",
"ShowExp": false,
"Ui": {
"HideAddDel": false,
"Visible": false
}
},
{
"Name": "_out",
"ShowExp": false,
"Ui": {
"HideAddDel": false,
"Visible": false
}
}
]
}
]
},
{
"Pos": {
"X": 10.326139,
"Y": -17.947025
},
"Name": "button_send",
"Exe": "button",
"Attrs": [
{
"Name": "grid",
"Value": "[3, 1, 1, 1]",
"ShowExp": false,
"Ui": {
"HideAddDel": true,
"Visible": false
}
},
{
"Name": "enable",
"Value": "editbox.isEmpty==0",
"ShowExp": false,
"Ui": {
"Fn": "switch",
"HideAddDel": false,
"Visible": false
}
},
{
"Name": "type",
"Value": "0",
"ShowExp": false,
"Ui": {
"Fn": "combo",
"Prms": {
"labels": "Classic;Light;Menu",
"values": ""
},
"HideAddDel": false,
"Visible": false
}
},
{
"Name": "label",
"Value": "\"Send\"",
"ShowExp": false,
"Ui": {
"HideAddDel": false,
"Visible": false
}
},
{
"Name": "clicked",
"Value": "0",
"ShowExp": false,
"Ui": {
"Fn": "switch",
"HideAddDel": false,
"Visible": false
}
},
{
"Name": "grid_show",
"Value": "1",
"ShowExp": false,
"Ui": {
"Fn": "switch",
"HideAddDel": false,
"Visible": false
}
}
]
},
{
"Pos": {
"X": 6.0713053,
"Y": -22.008133
},
"Name": "set_editbox",
"Exe": "setter",
"Attrs": [
{
"Name": "trigger",
"Value": "microphone.finished",
"ShowExp": true,
"Ui": {
"Fn": "switch",
"HideAddDel": false,
"Visible": false
}
},
{
"Name": "value",
"Value": "get(nn_whisper_cpp._out, \"text\")",
"ShowExp": true,
"Ui": {
"HideAddDel": false,
"Visible": false
}
},
{
"Name": "node",
"Value": "\"editbox\"",
"ShowExp": false,
"Ui": {
"HideAddDel": false,
"Visible": false
}
},
{
"Name": "attr",
"Value": "\"value\"",
"ShowExp": false,
"Ui": {
"HideAddDel": false,
"Visible": false
}
}
]
},
{
"Pos": {
"X": 4.7031846,
"Y": -6.73128
},
"Name": "json_into_single_string",
"Exe": "code_python",
"Attrs": [
{
"Name": "code",
"Value": "\"_chat = \\\"\\\"\\nfor r in rows:\\n\\t_chat += \\\"\\\\nUser: \\\" + r[0]\\n\\t_chat += \\\"\\\\nLlama: \\\" + r[1]\\n\"",
"ShowExp": false,
"Ui": {
"Fn": "Code",
"HideAddDel": false,
"Visible": false
}
},
{
"Name": "rows",
"Value": "db_select._rows",
"ShowExp": false,
"Ui": {
"HideAddDel": false,
"Visible": false
}
},
{
"Name": "grid",
"Value": "[1, 0, 1, 1]",
"ShowExp": false,
"Ui": {
"HideAddDel": false,
"Visible": false
}
},
{
"Name": "_chat",
"ShowExp": false,
"Ui": {
"HideAddDel": false,
"Visible": false
}
}
]
},
{
"Pos": {
"X": 11.861131,
"Y": -4.0857973
},
"Name": "chat_history",
"Exe": "text",
"Attrs": [
{
"Name": "grid",
"Value": "[1, 0, 3, 1]",
"ShowExp": false,
"Ui": {
"HideAddDel": true,
"Visible": false
}
},
{
"Name": "label",
"Value": "json_into_single_string._chat",
"ShowExp": false,
"Ui": {
"HideAddDel": false,
"Visible": false
}
},
{
"Name": "align_h",
"Value": "0",
"ShowExp": false,
"Ui": {
"Fn": "combo",
"Prms": {
"labels": "Left;Center;Right",
"values": ""
},
"HideAddDel": false,
"Visible": false
}
},
{
"Name": "align_v",
"Value": "0",
"ShowExp": false,
"Ui": {
"Fn": "combo",
"Prms": {
"labels": "Top;Center;Bottom",
"values": ""
},
"HideAddDel": false,
"Visible": false
}
},
{
"Name": "selection",
"Value": "1",
"ShowExp": false,
"Ui": {
"Fn": "switch",
"HideAddDel": false,
"Visible": false
}
},
{
"Name": "multi_line",
"Value": "1",
"ShowExp": false,
"Ui": {
"Fn": "switch",
"HideAddDel": false,
"Visible": false
}
},
{
"Name": "draw_border",
"Value": "1",
"ShowExp": false,
"Ui": {
"Fn": "switch",
"HideAddDel": false,
"Visible": false
}
},
{
"Name": "grid_show",
"Value": "1",
"ShowExp": false,
"Ui": {
"Fn": "switch",
"HideAddDel": false,
"Visible": false
}
}
]
},
{
"Pos": {
"X": -8.5998335,
"Y": -21.931551
},
"Name": "microphone",
"Exe": "microphone",
"Attrs": [
{
"Name": "grid",
"Value": "[1, 1, 1, 1]",
"ShowExp": false,
"Ui": {
"HideAddDel": true,
"Visible": false
}
},
{
"Name": "enable",
"Value": "1",
"ShowExp": false,
"Ui": {
"Fn": "switch",
"HideAddDel": false,
"Visible": false
}
},
{
"Name": "temp_file",
"Value": "\"temp_mic.wav\"",
"ShowExp": false,
"Ui": {
"HideAddDel": false,
"Visible": false
}
},
{
"Name": "_out",
"Value": "\"\"",
"ShowExp": false,
"Ui": {
"HideAddDel": false,
"Visible": false
}
},
{
"Name": "finished",
"Value": "0",
"ShowExp": false,
"Ui": {
"Fn": "switch",
"HideAddDel": false,
"Visible": false
}
},
{
"Name": "grid_show",
"Value": "1",
"ShowExp": false,
"Ui": {
"Fn": "switch",
"HideAddDel": false,
"Visible": false
}
}
]
},
{
"Pos": {
"X": -2.7836819,
"Y": -6.792572
},
"Name": "db_select",
"Exe": "sqlite_select",
"Attrs": [
{
"Name": "file",
"Value": "\"apps/LLM_chat/db.sqlite\"",
"ShowExp": false,
"Ui": {
"Fn": "file",
"HideAddDel": false,
"Visible": false
}
},
{
"Name": "query",
"Value": "\"SELECT user, bot FROM chat ORDER by date\"",
"ShowExp": false,
"Ui": {
"HideAddDel": false,
"Visible": false
}
},
{
"Name": "_rows",
"ShowExp": false,
"Ui": {
"HideAddDel": false,
"Visible": false
}
},
{
"Name": "_columns",
"ShowExp": false,
"Ui": {
"HideAddDel": false,
"Visible": false
}
},
{
"Name": "grid",
"Value": "[1, 0, 1, 1]",
"ShowExp": false,
"Ui": {
"HideAddDel": false,
"Visible": false
}
}
]
},
{
"Pos": {
"X": -2.9953098,
"Y": -11.656739
},
"Name": "editbox",
"Exe": "editbox",
"Attrs": [
{
"Name": "grid",
"Value": "[2, 1, 1, 1]",
"ShowExp": false,
"Ui": {
"HideAddDel": true,
"Visible": false
}
},
{
"Name": "value",
"Value": "\"\"",
"ShowExp": false,
"Ui": {
"HideAddDel": false,
"Visible": false
}
},
{
"Name": "align_h",
"Value": "0",
"ShowExp": false,
"Ui": {
"Fn": "combo",
"Prms": {
"labels": "Left;Center;Right",
"values": ""
},
"HideAddDel": false,
"Visible": false
}
},
{
"Name": "align_v",
"Value": "0",
"ShowExp": false,
"Ui": {
"Fn": "combo",
"Prms": {
"labels": "Top;Center;Bottom",
"values": ""
},
"HideAddDel": false,
"Visible": false
}
},
{
"Name": "enable",
"Value": "1",
"ShowExp": false,
"Ui": {
"Fn": "switch",
"HideAddDel": false,
"Visible": false
}
},
{
"Name": "tempToValue",
"Value": "0",
"ShowExp": false,
"Ui": {
"Fn": "switch",
"HideAddDel": false,
"Visible": false
}
},
{
"Name": "precision",
"Value": "2",
"ShowExp": false,
"Ui": {
"HideAddDel": false,
"Visible": false
}
},
{
"Name": "ghost",
"Value": "\"Message\"",
"ShowExp": false,
"Ui": {
"HideAddDel": false,
"Visible": false
}
},
{
"Name": "multi_line",
"Value": "1",
"ShowExp": false,
"Ui": {
"Fn": "switch",
"HideAddDel": false,
"Visible": false
}
},
{
"Name": "multi_line_enter_finish",
"Value": "1",
"ShowExp": false,
"Ui": {
"Fn": "switch",
"HideAddDel": false,
"Visible": false
}
},
{
"Name": "finished",
"Value": "0",
"ShowExp": false,
"Ui": {
"Fn": "switch",
"HideAddDel": false,
"Visible": false
}
},
{
"Name": "enter_finished",
"Value": "0",
"ShowExp": false,
"Ui": {
"Fn": "switch",
"HideAddDel": false,
"Visible": false
}
},
{
"Name": "isEmpty",
"Value": "1",
"ShowExp": false,
"Ui": {
"Fn": "switch",
"HideAddDel": false,
"Visible": false
}
},
{
"Name": "grid_show",
"Value": "1",
"ShowExp": false,
"Ui": {
"Fn": "switch",
"HideAddDel": false,
"Visible": false
}
}
]
},
{
"Pos": {
"X": -1.2282504,
"Y": -19.165276
},
"Name": "nn_whisper_cpp",
"Exe": "nn_whisper_cpp",
"Attrs": [
{
"Name": "model",
"Value": "\"models/ggml-tiny.en.bin\"",
"ShowExp": false,
"Ui": {
"Fn": "combo",
"Prms": {
"labels": ";ggml-tiny.en",
"values": ";ggml-tiny.en"
},
"HideAddDel": false,
"Visible": false
}
},
{
"Name": "input",
"Value": "microphone._out",
"ShowExp": false,
"Ui": {
"HideAddDel": false,
"Visible": false
}
},
{
"Name": "offset_t",
"Value": "0",
"ShowExp": false,
"Ui": {
"HideAddDel": false,
"Visible": false
}
},
{
"Name": "offset_n",
"Value": "0",
"ShowExp": false,
"Ui": {
"HideAddDel": false,
"Visible": false
}
},
{
"Name": "duration",
"Value": "0",
"ShowExp": false,
"Ui": {
"HideAddDel": false,
"Visible": false
}
},
{
"Name": "max_context",
"Value": "-1",
"ShowExp": false,
"Ui": {
"HideAddDel": false,
"Visible": false
}
},
{
"Name": "max_len",
"Value": "0",
"ShowExp": false,
"Ui": {
"HideAddDel": false,
"Visible": false
}
},
{
"Name": "best_of",
"Value": "2",
"ShowExp": false,
"Ui": {
"HideAddDel": false,
"Visible": false
}
},
{
"Name": "beam_size",
"Value": "-1",
"ShowExp": false,
"Ui": {
"HideAddDel": false,
"Visible": false
}
},
{
"Name": "word_thold",
"Value": "0.01",
"ShowExp": false,
"Ui": {
"HideAddDel": false,
"Visible": false
}
},
{
"Name": "entropy_thold",
"Value": "2.4",
"ShowExp": false,
"Ui": {
"HideAddDel": false,
"Visible": false
}
},
{
"Name": "logprob_thold",
"Value": "-1",
"ShowExp": false,
"Ui": {
"HideAddDel": false,
"Visible": false
}
},
{
"Name": "translate",
"Value": "0",
"ShowExp": false,
"Ui": {
"Fn": "switch",
"HideAddDel": false,
"Visible": false
}
},
{
"Name": "diarize",
"Value": "0",
"ShowExp": false,
"Ui": {
"Fn": "switch",
"HideAddDel": false,
"Visible": false
}
},
{
"Name": "tinydiarize",
"Value": "0",
"ShowExp": false,
"Ui": {
"Fn": "switch",
"HideAddDel": false,
"Visible": false
}
},
{
"Name": "split_on_word",
"Value": "0",
"ShowExp": false,
"Ui": {
"Fn": "switch",
"HideAddDel": false,
"Visible": false
}
},
{
"Name": "no_timestamps",
"Value": "0",
"ShowExp": false,
"Ui": {
"Fn": "switch",
"HideAddDel": false,
"Visible": false
}
},
{
"Name": "language",
"Value": "\"\"",
"ShowExp": false,
"Ui": {
"HideAddDel": false,
"Visible": false
}
},
{
"Name": "detect_language",
"Value": "0",
"ShowExp": false,
"Ui": {
"Fn": "switch",
"HideAddDel": false,
"Visible": false
}
},
{
"Name": "temperature",
"Value": "0",
"ShowExp": false,
"Ui": {
"HideAddDel": false,
"Visible": false
}
},
{
"Name": "temperature_inc",
"Value": "0.2",
"ShowExp": false,
"Ui": {
"HideAddDel": false,
"Visible": false
}
},
{
"Name": "response_format",
"Value": "\"verbose_json\"",
"ShowExp": false,
"Ui": {
"Fn": "combo",
"Prms": {
"labels": "verbose_json;json;text;srt;vtt",
"values": "verbose_json;json;text;srt;vtt"
},
"HideAddDel": false,
"Visible": false
}
},
{
"Name": "_out",
"ShowExp": false,
"Ui": {
"HideAddDel": false,
"Visible": false
}
}
]
}
]
}